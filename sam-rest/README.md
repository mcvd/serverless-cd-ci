# SAM-REST Serverless

Provide a guidance & inspiration on how to use AWS SAM to develop a Serverless RESTful API.

* [x] [AWS Local Development](https://devsecops.job4u.io/en/serverless/sam-local)
    
* [x] [Deploy the SAM application](https://devsecops.job4u.io/en/serverless/manual-deploy)

    ```
    cd sam-rest
    ./deploy.sh
    ```

* [x] Directory Structure

    - |-- `src/lambda-handlers` - Code for the application's Lambda function.
    - |-- `events` - Invocation events that you can use to invoke the function.
    - |-- `__tests__` - Unit tests for the application code. 
    - |-- `template.yml` - A template that defines the application's AWS resources.

* [x] Use the AWS SAM CLI to build and test locally

    ```
    sam local invoke putItemFunction --event events/event-post-item.json
    sam local invoke getAllItemsFunction --event events/event-get-all-items.json
    ```

* [x] Use the AWS SAM CLI to emulate your application's API. 

    ```
    sam local start-api
    curl localhost:3000
    ```

* [x] Fetch, tail, and filter Lambda function logs

    The AWS SAM CLI has a command called [`sam logs`](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-logging.html) to lets you fetch logs that are generated by your Lambda function from the command line. **NOTE:** This command works for all Lambda functions, not just the ones you deploy using AWS SAM.
    
    ```bash
    sam logs -n putItemFunction --stack-name sam-app --tail
    ```

* [x] Tests

    Tests are defined in the `__tests__` folder in this project, using the [Jest test framework](https://jestjs.io/) and run tests.
    
    ```bash
    npm run test
    
    AWS_SAM_STACK_NAME=<stack-name> npm run integ-test
    ```

* [x] Cleanup

    To delete the sample application that you created, use the AWS CLI. Assuming you used your project name for the stack name, you can run the following:
    
    ```bash
    aws cloudformation delete-stack --stack-name sam-rest
    ```